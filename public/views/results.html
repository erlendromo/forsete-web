<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Results</title>
  <link rel="icon" type="image/x-icon" href="images/favicon_io/favicon.ico">
  <link rel="stylesheet" href="/output.css" />
</head>
<script src="js/ham-menu.js" defer></script>
<script src="js/queryreader.js" defer></script>

<body class="bg-gray-900 text-white">
  <nav class="navbar fixed top-0 left-0 w-full bg-gray-800 py-4 px-8 shadow-md z-50">
    <a href="index.html">
      <h1 class="text-4xl font-bold">FORSETE</h1>
    </a>
    <div class="ham-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>

  <main class="min-h-screen flex flex-col items-center justify-center">
    <div class="space-y-8 font-sans max-w-md mx-auto">
      <div class="flex flex-row items-center justify-center font-sans max-w-md mx-auto space-x-4">
        <img id=dynamicImage class="h-auto max-w-lg rounded-lg" src="" alt="image result">
        <textarea id="jsonOutput" name="jsonOutput" rows="4" cols="50">
        </textarea>
        <script>
          async function main() {
            const data = await getData();
            const textArea = document.getElementById('jsonOutput');
            // Join only the values, separated by newlines.
            textArea.value = Object.values(data).join('\n');
          }

          async function getData() {
            const urlParams = new URLSearchParams(window.location.search);
            const fileParam = urlParams.get('file');
            try {
              const res = await fetch("uploads/"+ fileParam +".json");
              const jsonData = await res.json();
              return jsonData;
            } catch (error) {
              console.error("Error fetching JSON data:", error);
              return {};
            }
          }

          main();
        </script>
      </div>

      <div class="flex justify-end">
        <button id="confirmBtn"
          class="inline-block justify-end bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full cursor-pointer">
          Confirm
        </button>
      </div>

      <div class="flex justify-between space-x-4 mt-8">
        <button id="cancelBtn"
          class="inline-block bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full cursor-pointer">
          Cancel
        </button>
        <button id="uploadBtn"
          class="inline-block bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full cursor-pointer">
          Save all
        </button>
      </div>
    </div>
  </main>
</body>

</html>